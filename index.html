<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
  <title>Document</title>
</head>

<body>
  <div class="popup">
    <img src="assets/142.jpg" alt="wts" class="popup_img">
  </div>

  <div class="container">

    <div class="box">
      <h2 class="name">Ручка</h2>
      <a href="#" class="buy">Купить</a>
      <div class="circle"></div>
      <!-- <img src="assets/pen.png" alt="running_shoes" class="product"> -->
    </div>

  </div>
  <script src="vanilla-tilt.min.js"></script>
  <script>
    VanillaTilt.init(document.querySelectorAll(".box"), {
      max: 25,
      speed: 400
    });
  </script>
  <script>
    document.querySelector('.popup_img').addEventListener('click', close);
    document.querySelector('.buy').addEventListener('click', open);
    function close() {
      console.log('1')
      animate();
      document.querySelector('.popup').classList.add('close')
    }
    function open() {
      console.log('1')
      document.querySelector('.popup').classList.remove('close')
    }
  </script>



  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r123/three.min.js"></script>
  <script src="https://cdn.rawgit.com/mrdoob/three.js/master/examples/js/loaders/GLTFLoader.js"></script>
  <script>
    scene = new THREE.Scene();
    camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.z = 8;

    renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
    renderer.setClearColor(0x000000, 0);
    renderer.setSize(300, 300);

    renderer.domElement.setAttribute("class", "product");
    document.querySelector('.box').insertBefore(renderer.domElement, document.querySelector('.box').firstChild);

    const aLight = new THREE.AmbientLight(0x404040, 10.8);
    scene.add(aLight);

    const pLight = new THREE.PointLight(0xffffff, 1.2);
    pLight.position.set(0, -4, 15);
    scene.add(pLight);

    // const helper = new THREE.PointLightHelper(pLight);
    // scene.add(helper)

    let loader = new THREE.GLTFLoader();
    let obj = null;
    loader.load('3d/scene.gltf', function (gltf) {
      obj = gltf;
      obj.scene.scale.set(1, 1, 1);

      scene.add(obj.scene);
    });

    function animate() {
      requestAnimationFrame(animate);

      if (obj)
        obj.scene.rotation.y += 0.03;
      obj.scene.rotation.z = -1.4;

      renderer.render(scene, camera);
    }


  </script>

</body>

</html>
